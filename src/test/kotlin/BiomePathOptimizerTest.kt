/*
 * ONI Seed Browser
 * Copyright (C) 2025 Stefan Oltmann
 * https://stefan-oltmann.de
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

import de.stefan_oltmann.oni.model.BiomePaths
import de.stefan_oltmann.oni.model.BiomePathsTest
import kotlin.test.Test
import kotlin.test.assertEquals

class BiomePathOptimizerTest {

    @Test
    fun testOptimize() {

        val biomePaths = BiomePaths.parse(BiomePathsTest.rawBiomePathsString)

        val optimizedBiomePaths = biomePaths.optimize()

        val actual = optimizedBiomePaths.serialize()

        assertEquals(
            expected = optimizedBiomePathsString,
            actual = actual
        )
    }

    companion object {

        val optimizedBiomePathsString = """
            3:136,197 8,-17 -5,-19 -17,-10 -19,6 -10,17 1,14 17,16|39,286 -9,-21 -30,3 0,25 30,3|94,188 -1,-14 -18,-7 -4,2 -3,24 4,5|103,157 -10,-14 -8,1 -10,23 18,7|122,151 1,-9 -19,-11 -11,12 10,14|145,213 0,-5 -9,-11 -25,7 0,8 13,11|150,154 1,-12 -13,-10 -15,10 -1,9 17,10|168,193 -4,-11 -20,-2 -8,17 9,11|169,168 -19,-14 -11,7 5,19 20,2
            5:31,353 -31,-8 0,35 32,0|52,160 -5,-18 -11,-4 -16,17 5,15 8,4|61,351 -19,-8 -11,10 1,27 29,0|73,344 0,-12 -13,-13 -19,7 1,17 19,8|92,356 -19,-12 -12,7 0,29 31,0|93,319 -2,-17 -1,-1 -26,5 -4,13 13,13|122,350 -9,-6 -21,12 0,24 31,0|117,298 5,-16 -18,-11 -14,9 0,21 1,1|126,313 -9,-15 -26,4 2,17 18,11|130,278 3,-26 -9,-6 -18,7 -2,18 18,11|153,353 -10,-8 -21,5 1,30 29,0|177,345 -4,-18 -25,-3 -5,21 10,8|181,347 -4,-2 -24,8 -1,27 31,0|211,349 -5,-6 -25,4 2,33 25,0|240,348 0,-21 -31,1 -3,15 5,6|211,299 -9,-15 -8,-1 -16,17 5,13 20,3|214,238 -9,-16 -20,0 -3,4 8,28 14,1|215,157 -10,-19 -18,4 -4,20 19,12|240,348 -29,1 -3,31 32,0
            6:33,320 -3,-24 -30,-3 0,37|42,343 -1,-17 -8,-6 -33,10 0,15 31,8|60,319 4,-13 -12,-19 -13,-1 -9,10 3,24 8,6|113,344 -2,-14 -18,-11 -20,13 0,12 19,12|143,345 5,-21 -5,-8 -17,-3 -15,17 2,14 9,6|183,313 -5,-13 -23,-8 -12,24 5,8 25,3|206,343 3,-15 -6,-12 -20,-3 -10,14 4,18 4,2|240,327 0,-28 -29,0 -8,17 6,12
            0:30,265 4,-10 -11,-22 -23,0 0,35|69,268 -3,-12 -7,-6 -25,5 -4,10 9,21 13,1|153,103 1,-18 -16,-12 -18,12 0,19 18,9|182,263 8,-9 -8,-28 -22,5 -6,16 13,16|240,299 0,-28 -29,-1 -9,14 9,15|240,184 0,-25 -25,-2 -13,17 2,10 8,7
            13:36,216 -3,-13 -33,-3 0,33 23,0|68,193 3,-24 -19,-9 -19,14 5,19|54,106 8,-30 -1,-2 -27,-2 -10,18 12,18|111,212 0,-8 -17,-16 -22,10 0,16 18,12|93,143 11,-12 -1,-17 -15,-8 -21,12 0,10 18,16|216,205 -4,-14 -8,-7 -24,15 5,23 20,0
            20:38,193 -5,-19 -8,-4 -25,9 0,21 33,3|29,122 7,-14 -12,-18 -24,0 0,32|104,271 2,-18 -15,-11 -25,14 3,12 21,12|88,106 -1,-21 -25,-9 -8,30 13,12|120,104 0,-19 -19,-11 -14,11 1,21 15,8|167,263 -13,-16 -21,5 -3,26 23,9|240,126 -28,0 -7,12 10,19 25,2
            11:25,170 -5,-15 -20,-4 0,28|211,270 -7,-15 -14,-1 -8,9 12,20 8,1|240,184 -28,7 4,14 24,3
            2:36,138 -7,-16 -29,0 0,29 20,4|72,214 0,-16 -4,-5 -30,0 -5,10 3,13 22,8|91,242 -1,-16 -18,-12 -14,10 1,26 7,6|138,132 0,-19 -18,-9 -17,10 1,17 19,11|154,247 6,-16 -15,-18 -21,10 0,23 9,6|186,106 -4,-29 -4,-3 -24,11 -1,18 21,12|205,138 7,-12 -7,-15 -19,-5 -12,9 -1,14 14,13
            16:24,90 10,-18 -7,-14 -27,-2 0,34|65,59 -20,-23 -6,0 -12,22 7,14 27,2|101,74 -1,-13 -15,-12 -20,10 -4,15 1,2 25,9|138,73 0,-13 -18,-13 -20,14 1,13 19,11|178,74 -3,-15 -19,-11 -18,12 0,13 16,12|207,73 6,-13 -13,-23 -3,0 -22,22 3,15 4,3|240,57 -27,3 -6,13 12,19 21,1
            8:59,250 -1,-26 -22,-8 -13,17 11,22|67,128 0,-10 -13,-12 -18,2 -7,14 7,16 11,4|90,301 0,-21 -21,-12 -17,19 12,19|155,292 -2,-5 -23,-9 -8,4 -5,16 9,15 17,3|194,283 -12,-20 -15,0 -14,24 2,5 23,8|219,92 -12,-19 -25,4 4,29 19,5|240,208 -24,-3 -11,17 9,16 26,1
            4:75,167 10,-23 -18,-16 -20,14 5,18 19,9|124,246 0,-23 -13,-11 -21,14 1,16 15,11|173,129 1,-14 -21,-12 -15,10 0,19 13,10|182,226 3,-4 -5,-23 -12,-6 -23,15 0,5 15,18|183,162 4,-20 -14,-13 -22,13 -1,12 19,14|204,184 -2,-10 -19,-12 -14,6 -5,14 4,11 12,6|240,239 -26,-1 -10,17 7,15 29,1|240,93 -21,-1 -14,19 7,15 28,0
        """.trimIndent()
    }
}
